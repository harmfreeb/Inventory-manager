function filter(t,e,a){t||(t=" "),0===a.length?($(".alert").remove(),$("#first-panel").before("<div class='alert alert-danger'><a href='/' class='close' data-dismiss='alert'>&times;</a>Veuillez cocher au moins une catégorie</div>")):($(".alert").remove(),$.ajax({type:"GET",url:"search?search="+t+"&statut="+e+"&category="+a,dataType:"json",success:function(t){0==t.cd.length?($(".alert").remove(),$("tbody").empty(),$("#first-panel").before("<div class='alert alert-danger'><a href='/' class='close' data-dismiss='alert'>&times;</a>Aucun CD de trouvé</div>")):($("tbody").empty(),$.each(t.cd,function(t,e){$("tbody").append('<tr><td><img class="img-thumbnail img-size-2" src="'+e.cover+'" alt="'+e.title+'"></td><td class="text-center">'+e.title+'</td><td class="text-center">'+e.artist+'</td><td class="text-center">'+e.categorie+'</td><td class="text-center">'+e.quantity+'</td><td class="text-center">'+e.price+'</td><td class="text-center">'+e.statut+'</td><td class="text-center"><div class="btn-group"><a href="editer-un-produit?id='+e.id+'" class="btn btn-info btn-xs"  title="Edit" data-toggle="tooltip"><span class="glyphicon glyphicon-edit"></span></a><a href="supprimer-un-produit?id='+e.id+'" class="btn btn-info btn-xs"  title="Delete" data-toggle="tooltip"><span class="glyphicon glyphicon-trash"></span></a></div></td></tr><tr>')}))},error:function(){$(".alert").remove(),$("#first-panel").before("<div class='alert alert-danger'><a href='/' class='close' data-dismiss='alert'>&times;</a>Erreur, veuillez réessayer</div>")}}))}function readURL(t){if(t.files&&t.files[0]){var e=new FileReader;e.onload=function(t){$(".cover-preview img").css("opacity","1"),$(".cover-preview img").removeAttr("src"),$(".cover-preview img").attr("src",t.target.result)},e.readAsDataURL(t.files[0])}}var categories=[],statut="'En stock', 'Approvisionnement en cours', 'En rupture de stock chez le fournisseur'",search="";$(".filter input").each(function(){categories.push($(this).val())}),$(".filter input").change(function(){this.checked?categories.push($(this).val()):categories.splice($.inArray($(this).val(),categories),1),filter(search,statut,categories)}),$(".search-input").keyup(function(){search=$(this).val(),filter(search,statut,categories)}),$(".statut input[name=statut]").change(function(){statut=$(this).val(),filter(search,statut,categories)}),$(".cover-upload").change(function(){readURL(this)}),""==$(".cover-preview img").attr("src")||"has-error"==$(".cover-preview img").attr("src")?$(".cover-preview img").css("opacity","0"):$(".cover-preview img").css("opacity","1");